<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8" />
  <title>메인 페이지</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'main-bg': '#232b39',
            'banner-yellow': '#facc15'
          }
        }
      }
    }
  </script>
</head>
<body class="bg-main-bg min-h-screen w-full">
<!-- 배너 -->
<div class="w-full bg-main-bg py-6">
  <div class="text-banner-yellow text-4xl italic font-bold text-center">Banner</div>
</div>
<!-- 메인 영역 -->
<div class="flex flex-row gap-8 px-8 py-8 w-full max-w-[1600px] mx-auto">
  <!-- 왼쪽: 탭 + 콘텐츠 -->
  <div class="flex-1 flex flex-col">
    <!-- 탭 버튼 -->
    <div class="flex space-x-2 mb-0">
      <button id="tab-board-btn" class="tab-btn bg-white text-main-bg font-bold px-8 py-3 rounded-t-xl shadow -mb-1 border-b-4 border-main-bg">게시판</button>
      <button id="tab-stock-btn" class="tab-btn bg-gray-700 text-white font-bold px-8 py-3 rounded-t-xl shadow -mb-1">주식</button>
      <button id="tab-game-btn" class="tab-btn bg-gray-700 text-white font-bold px-8 py-3 rounded-t-xl shadow -mb-1">게임</button>
    </div>
    <!-- 콘텐츠 카드 -->
    <div class="flex-1 bg-white rounded-b-xl rounded-tr-xl shadow-2xl p-8 min-h-[500px]">
      <!-- 게시판 -->
      <div id="tab-board" class="tab-content">
        <h2 class="text-2xl font-bold mb-6 text-gray-800">게시판</h2>
        <div class="overflow-auto">
          <table class="w-full text-left border-collapse">
            <thead class="bg-gray-50">
            <tr>
              <th class="py-3 px-6 border-b font-semibold text-gray-700">번호</th>
              <th class="py-3 px-6 border-b font-semibold text-gray-700">제목</th>
              <th class="py-3 px-6 border-b font-semibold text-gray-700">작성자</th>
              <th class="py-3 px-6 border-b font-semibold text-gray-700">작성일</th>
              <th class="py-3 px-6 border-b font-semibold text-gray-700">조회수</th>
              <th class="py-3 px-6 border-b font-semibold text-gray-700">댓글수</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="post, stat : ${postList}" class="hover:bg-gray-50">
              <td class="py-3 px-6 border-b" th:text="${post.postId}">1</td>
              <td class="py-3 px-6 border-b">
                <a th:href="@{/posts/{id}(id=${post.postId})}" th:text="${post.title}" class="text-blue-600 hover:underline">제목</a>
              </td>
              <td class="py-3 px-6 border-b" th:text="${post.member.name}">작성자</td>
              <td class="py-3 px-6 border-b" th:text="${post.postTime}">2025-06-17</td>
              <td class="py-3 px-6 border-b" th:text="${post.viewCount}">0</td>
              <td class="py-3 px-6 border-b" th:text="${post.replyCount}">0</td>
            </tr>
            <tr th:if="${#lists.isEmpty(postList)}">
              <td colspan="6" class="text-center text-gray-400 py-8">게시글이 없습니다.</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
      <!-- 주식 -->
      <div id="tab-stock" class="tab-content hidden">
        <h2 class="text-2xl font-bold mb-6 text-gray-800">주식</h2>
        <div class="text-gray-600 text-lg">여기에 주식 관련 내용을 넣으세요.</div>
      </div>
      <!-- 게임 -->
      <div id="tab-game" class="tab-content hidden">
        <h2 class="text-2xl font-bold mb-6 text-gray-800">게임</h2>
        <div class="text-gray-600 text-lg">여기에 게임 관련 내용을 넣으세요.</div>
      </div>
    </div>
  </div>
  <!-- 오른쪽: 내정보/로그인 -->
  <div class="w-[400px] flex-shrink-0 flex flex-col">
    <div class="flex">
      <div class="bg-white rounded-t-xl px-8 py-3 font-bold text-main-bg text-xl -mb-1 shadow-lg border-b-4 border-main-bg">
        <span sec:authorize="isAuthenticated()">내정보</span>
        <span sec:authorize="!isAuthenticated()">로그인</span>
      </div>
    </div>
    <div class="flex-1 bg-white rounded-b-xl rounded-tr-xl shadow-2xl p-8 flex flex-col min-h-[500px]">
     <!-- 로그인 상태: 내정보 -->
		<div sec:authorize="isAuthenticated()" th:if="${member != null}" class="h-full flex flex-col justify-between">
		  <div>
		    <div class="flex justify-between mb-2">
		      <span class="text-gray-600 text-base">ID</span>
		      <span class="text-gray-600 text-base">등급</span>
		    </div>
		    <div class="flex justify-between mb-2">
		      <span class="text-gray-800 text-lg font-semibold" th:text="${member?.name ?: ''}">user01</span>
		      <span class="text-blue-600 text-lg font-semibold" th:text="${member?.rank ?: ''}">Bronze</span>
		    </div>
		    <div class="flex justify-between mb-2">
		      <span class="text-gray-600 text-base">보유 포인트</span>
		      <span class="text-green-600 text-xl font-bold" th:text="${member?.point ?: 0}">10000</span>
		    </div>
		    <div class="flex justify-between text-gray-500 text-sm mt-4">
		      <span>작성한 게시글 수: <span class="font-semibold" th:text="${member?.postCount ?: 0}">0</span></span>
		      <span>작성한 댓글 수: <span class="font-semibold" th:text="${member?.commentCount ?: 0}">0</span></span>
		    </div>
		  </div>
		  <form th:action="@{/logout}" method="post" class="mt-8">
		    <button type="submit" class="w-full bg-red-500 text-white py-3 rounded-lg font-semibold hover:bg-red-600 transition-colors">로그아웃</button>
		  </form>
		</div>
      <!-- 비로그인 상태: 로그인폼 -->
      <div sec:authorize="!isAuthenticated()" class="h-full flex flex-col justify-center">
        <form th:action="@{/login}" method="post" class="space-y-4">
          <div>
            <label for="eamil" class="block text-gray-700 font-semibold mb-2">아이디</label>
            <input type="text" id="email" name="email"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                   placeholder="아이디를 입력하세요" required>
          </div>
          <div>
            <label for="password" class="block text-gray-700 font-semibold mb-2">비밀번호</label>
            <input type="password" id="password" name="password"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                   placeholder="비밀번호를 입력하세요" required>
          </div>
          <div class="text-sm text-left">
            <a th:href="@{/members/find-id}" class="text-gray-500 hover:text-blue-600 transition-colors">아이디 찾기</a>
            <span class="text-gray-300 mx-1">|</span>
            <a th:href="@{/members/find-pw}" class="text-gray-500 hover:text-blue-600 transition-colors">비밀번호 찾기</a>
          </div>
          <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">로그인</button>
          <div th:if="${param.error}" class="text-red-500 text-sm text-center">
            아이디 또는 비밀번호가 올바르지 않습니다.
          </div>
        </form>
        <div class="mt-6 text-center">
          <span class="text-gray-600">아직 회원이 아니신가요?</span>
          <a th:href="@{/signup}" class="text-blue-600 hover:text-blue-800 font-semibold ml-2 transition-colors">회원가입</a>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- 탭 전환 스크립트 -->
<script>
  const tabs = ['board', 'stock', 'game'];
  tabs.forEach(tab => {
    document.getElementById(`tab-${tab}-btn`).addEventListener('click', () => {
      tabs.forEach(t => {
        document.getElementById(`tab-${t}`).classList.add('hidden');
        document.getElementById(`tab-${t}-btn`).classList.remove('bg-white', 'text-main-bg', 'border-b-4');
        document.getElementById(`tab-${t}-btn`).classList.add('bg-gray-700', 'text-white');
      });
      document.getElementById(`tab-${tab}`).classList.remove('hidden');
      document.getElementById(`tab-${tab}-btn`).classList.remove('bg-gray-700', 'text-white');
      document.getElementById(`tab-${tab}-btn`).classList.add('bg-white', 'text-main-bg', 'border-b-4');
    });
  });
</script>
</body>
</html>
